<p>Сервис &ldquo;Копирование значений CRM элементов&rdquo; позволяет копировать значений из одного CRM элемента в связанный с ним CRM элемент.</p><p>В CRM всегда есть связанные между собой сущности. Наличие связи определяется наличием поля в карточке CRM со ссылкой на другую сущность. Это может быть поле, которое называется &quot;ссылка&quot;, или просто &quot;id ...&quot; другой сущности CRM.</p><p><ac:image ac:height="250"><ri:attachment ri:filename="Снимок экрана 2024-08-02 в 14.18.12.png" /></ac:image></p><p>В примере мы видим сущность &quot;встречи&quot;, у которой есть связь с заявками и контактами. Важно, что связь актуальна не для 1 конкретного CRM элемента, а для всех этого типа. То есть у всех встреч данного клиента есть связь с заявками и контактами. Если ссылки на другую сущность нет, значит эти сущности напрямую не связаны друг с другом. Если CRM кастомная, все связи описаны в модели данных, которую присылает клиент.&nbsp;</p><p>Функционал копирования полей позволяет работать с сущностями, которые связаны между собой напрямую. При этом, ссылка&nbsp; может быть в сущности, из которой нам нужно копировать поле (тогда будет связь в отдающей стороне) или в сущности, в которую копируем поле (связь в принимающей стороне).</p><p><strong>Когда нужен функционал?</strong></p><ul style="list-style-type: square;"><li>Когда в отчёте используются фильтры по значениям полей связанных сущностей, при этом сами отчёты медленно строятся.</li><li>Когда необходимо чтобы одно и то же значение писал в 2 поля одного и того же элемента.</li><li>Когда часть данных необходимо &ldquo;прокинуть&rdquo; из связанного элемента для построения отчетов в новых срезах.</li></ul><p><strong>Пример:</strong></p><p>В CRM клиента есть сущность &ldquo;заявки&rdquo; с информацией о том, что данная заявка пришла от какого-то агента недвижимости. И есть сущность &ldquo;Встречи&rdquo;, где нет информации о том что клиент пришел от Агента, но есть ссылка на заявку.</p><p>С помощью сервиса можно скопировать значение поля &ldquo;Агент&rdquo; из заявки во встречу.</p><p>Как это работает:</p><p><ac:image ac:width="600"><ri:attachment ri:filename="Снимок экрана 2024-08-02 в 14.17.24.png" /></ac:image></p><p>В настройках интеграции необходимо указать:</p><ul><li>Название интеграции - название интеграции (в формате &quot;Поле А из сущности 1 в сущность 2&quot;)</li><li>Из аккаунта - указать коннектор, в котором эти сущности находятся</li><li>Из модели - указать сущность, из которой копируем поле</li><li>Из поля - указать название поля, значение которого копируем</li><li>Тип связи - тип связи - в отдающей или в принимающей стороне.&nbsp;Функционал копирования полей позволяет работать с сущностями, которые связаны между собой напрямую. При этом, ссылка связывающая эти сущности может быть в сущности, из которой нам нужно копировать поле (тогда будет связь в отдающей стороне) или в сущности, в которую копируем поле (связь в принимающей стороне).</li><li>Поле связи - здесь указываем название поля, по которому данные сущности связаны. У нас в примере это Ссылка на заявку. так как именно в этом поле содержится ссылка на сущность Заявки в сущности Встречи<br /><br /><ac:image ac:height="250"><ri:attachment ri:filename="Снимок экрана 2024-08-02 в 14.18.12.png" /></ac:image></li><li>В аккаунт - в каком коннекторе находится сущность, в которую хотим копировать поле. Чаще всего у клиента 1 коннектор CRM и обе сущности находятся в нем.</li><li>В модель - указываем показатель, в который копируем поле</li><li>В поле -&nbsp;В поле какой сущности мы будем записывать копию значения&nbsp;(в списке полей отображаются&nbsp;<strong>только</strong>&nbsp;поля, которые есть у данной сущности). Если нужного поля нет, то его нужно создать:&nbsp;<ul><li>для клиентов с АПИ импортом - для этого через импорт выбираем сущность, подтягиваем файл с новым полем, добавляем новое поле - импортируем</li><li>для остальных - через консультацию, либо копировать в неиспользуемое поле.</li></ul></li></ul><p>При первом запуске сервис скопирует все значения, созданные с 1 января 2015-го года. При создании нового поля данные появятся примерно через 2-3 часа.&nbsp;Если после создания интеграции копирования полей не хватает данных, необходимо обновить данные по интеграции (через мониторинг достоверности, так же как и другие интеграции).</p><p>Далее, раз в 15 минут сервис будет отслеживать все изменения значений с момента последнего запуска, после чего копировать эти значения.</p><ac:structured-macro ac:name="tip" ac:schema-version="1" ac:macro-id="e0204a1a-442d-437e-a272-58fcf845d49f"><ac:rich-text-body><p>Данный функционал не учитывает разрыв связи между сущностями. То есть, если копировали поле из &quot;Контакта&quot; в связанную &quot;Сделку&quot;, а потом в CRM между этими сущностями связь разорвали, Smartis не удалит копированные поля из сделки(это касается как автоматической работы функционала, так и случаев когда вы вручную обновите данные по интеграции, если достоверность по ней низкая).</p></ac:rich-text-body></ac:structured-macro><p><br /></p><p>Важно! При изменении настроек указатель не сбрасывается! А потому, если вы поняли что ошиблись в настройках, отключите старую интеграцию и создайте новую взамен.</p><p><br /></p><h3>Достоверность по копированию полей CRM</h3><p><ac:image ac:width="600"><ri:attachment ri:filename="Снимок экрана 2024-07-30 в 13.14.32.png" /></ac:image></p><p>В Smartis доступен просмотр и обновление данных через интерфейс Мониторинг системы по Копированию полей. Сервис отображается в списке, при клике на название сервиса открывается список подключенных интеграций и достоверность по каждой из них по дням.&nbsp;</p><p><span style="color: rgb(89,89,89);">Как работает: </span><span style="color: rgb(89,89,89);"><br /></span><strong><span style="color: rgb(89,89,89);">у нас </span></strong><span style="color: rgb(89,89,89);">- считаем сколько среди принимающих поле сущностей имеют заполненное поле</span></p><p><strong><span style="color: rgb(89,89,89);">всего</span></strong><span style="color: rgb(89,89,89);"> - сколько связанных сущностей по которым должны поля заполняться</span></p><p><span style="color: rgb(89,89,89);"><ac:image ac:width="350"><ri:attachment ri:filename="Снимок экрана 2024-07-30 в 13.16.13.png" /></ac:image></span></p><p><span style="color: rgb(89,89,89);">В примере смотрим интеграцию поле возраст из контакта в сделки. То есть, вы можете посмотреть, в &quot;у нас&quot; сколько сделок имеют заполненное поле &quot;возраст&quot;. А в &quot;всего&quot; - сколько есть сделок, связанных с контактами. Таким образом можно определить, из всех связанных сущностей передалось нужное поле или нет.&nbsp;<br />Если у нас меньше чем всего, это значит, что не во все сущности (в примере - сделки) вставились поля из нужных связанных с ними сущностей (в примере - контактов).</span></p><p><span style="color: rgb(89,89,89);">Для достоверности доступно обновление 2 видов:</span></p><ul style="list-style-type: square;"><li><span style="color: rgb(89,89,89);">обновление достоверности</span></li><li><span style="color: rgb(89,89,89);">обновление данных + достоверности</span><br /><span style="color: rgb(89,89,89);"><ac:image ac:width="300"><ri:attachment ri:filename="Снимок экрана 2024-07-30 в 13.21.08.png" /></ac:image><br /></span><br /><span style="color: rgb(89,89,89);">Эти данные также обрабатывает автоматический контроль достоверности. Если будут дни где достоверность ниже 99,84%, то синхрон 519 автоматически перезаберет данные.</span></li></ul><p><span style="color: rgb(89,89,89);">В Grafana есть мониторинг достоверности по копированию полей&nbsp;</span></p><p><span style="color: rgb(89,89,89);"><a href="https://grafana.smartis.bi/d/iSogWE_Sz/kopirovanie-polei?orgId=1">https://grafana.smartis.bi/d/iSogWE_Sz/kopirovanie-polei?orgId=1</a><br /></span></p><p><br /></p><p><br /></p>