<p>Инструкция по созданию сегментов:&nbsp;&nbsp;<ac:link><ri:page ri:content-title="1. Как работает создание сегментов Smartis.CDP в решении &quot;Конструктор сегментов&quot;" /><ac:plain-text-link-body><![CDATA[1. Как работает создание сегментов Smartis.CDP в решении "Конструктор сегментов"]]></ac:plain-text-link-body></ac:link></p><p><br /></p><ac:structured-macro ac:name="markdown" ac:schema-version="1" ac:macro-id="4857b056-75a4-4d85-930d-80b17816cc46"><ac:plain-text-body><![CDATA[Взаимодействие со фронтом реализуется с помощью контроллера `\App\Http\Controllers\Lk\Stat\SegmentsPageAjaxController` и вся логика обработки запросов реализована в классе `\App\Classes\CDP\FrontClasses\SegmentsFront`


В интерфейсе можно создавать сегменты на основе метрик (локальный сегмент), а можно создавать Look-alike сегмент (LAL-сегмент)


Как работает LAL сегмент:
### 1. Что такое LAL сегмент?

Look-alike аудитория (LAL) — это пользователи, которые похожи на выбранную рекламодателем аудиторию.
В контексте сегментов это означает, что LAL сегмент содержит в себе пользователей, который похожи на пользователей из родительского сегмента

### 2. Для чего он нужен?
LAL сегменты нужны для того, чтобы наши клиенты могли запускать рекламные компании на аудиторию похожих людей, которые уже являются их клиентами.
Таким образом наши клиенты рекламируются сразу на пользователей, которые с максимальной долей вероятности тоже станут их клиентами

### 3. Как он создаётся?
LAL сегмент создаётся внешним сервисом на основе уже существующего сегмента. При изменении родительского (на основе которого был создан LAL сегмент) сегмента - меняется и дочерний LAL сегмент

При создании нового сегмента LAL мы запоминаем parent_segment_id и range (точность/охват).
Также есть настройки, вшитые в код (например: по умолчанию распределение на города и устройства у нас включено)
Все настройки LAL сегментов мы сразу передаём во внешний сервис и сами их никак не используем

Алгоритм создания LAL сегмента:
1. Берём сегмент (родительский), на основе которого будем создавать LAL сегмент
2. Проверяем, создан ли уже родительский сегмент по внешнем сервисе (например: в Я.Аудитории)
3. Проверяем, отправлен ли уже LAL сегмент во внешний сервис
4. Если есть привязка с родительским сегментом, который успешно создан во внешнем сервисе и LAL сегмент ещё не был отправлен в этот сервис, то отправляем его

### 4. Где он?
Все классы, связанные с логикой LAL сегментов имеет в названии слово "Lal".
Примеры:
1. TransportSegmentsLalProcessing - класс, отвечающий за отправку Lal сегмента во внешний сервис
2. LalFactory - класс, отвечающий за работу Lal сегмента в рамках готовых решений (вывод информации на фронт, настройки, необходимые для решения, подключение решения, создание сегментов, создание дашборда)
3. SegmentLal - класс, отвечающий за тип сегмента: Lal

### Прочее
LAL сегмент может быть отправлен только в тот же сервис, в котором сущесвует родительский сегмент и только в тот же аккаунт

На основе одного родительского сегмента - может быть создано несколько LAL сегментов

LAL сегменты нельзя редактировать после их создания

LAL сегменты можно создавать из раздела "Сегменты", а не только через готовые решения

### Пример использования LAL сегмента
У ФСК есть 100к клиентов (условно). И они хотят максимально эффективно запустить рекламу на новую, свежую аудиторию. Они берут, создают сегмент (купившие в каком-то ЖК) и ставят период в 3 месяца (то есть купившие в каком-то ЖК за последние 3 месяца) и в этот сегмент из 100к войдут только 5к клиентов

После того, как они создали этот сегмент, в который вошли все их текущие клиенты с определёнными критериями, то они на основе данного сегмента создают LAL сегмент, куда будут входить максимально похожие новые пользователи, которые купят с большей долей вероятности, потому что рекламные сервисы собирают статистику по действиям пользователей. То есть в LAL сегмент попадут те, кто похож по возрасту/гео/полу и т.д. + ещё похожие по запросам и поведению




]]></ac:plain-text-body></ac:structured-macro>