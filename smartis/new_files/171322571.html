<ac:layout><ac:layout-section ac:type="two_right_sidebar"><ac:layout-cell><h2><span style="color: rgb(0,51,102);">Что такое веб-сервис</span></h2><p>Веб-сервис - это промежуточный сервис между CRM клиента и нашим сервисом (выделен желтым на скрине).&nbsp;</p><p>Клиент отправляет данные в веб-сервис, а мы настраиваем интеграцию с ним и автоматически забираем данные.&nbsp;</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><ac:image ac:height="250"><ri:attachment ri:filename="image2023-11-13_12-15-30.png" /></ac:image></span></p><p><br /></p><p><strong>Причина создания интеграции</strong></p><p>Не все клиенты готовы предоставлять доступ напрямую в crm по разным причинам:</p><ul><li>IT или безопасники&nbsp; боятся за безопасность данных,&nbsp;</li><li>Работоспособность crm может страдать при прямых запросах,&nbsp;</li><li>Если клиент использует 1С (нельзя напрямую интегрироваться с 1С);</li><li>Клиент хочет ограничить часть информации и управление правами пользователей не закрывает эту информацию.&nbsp;</li></ul><p><br /></p><p><br /></p><h2 class="paragraph paragraph_type_h2 paragraph_align_left paragraph_dir_ltr">Прямая интеграция с базой данных клиента</h2><p><span style="letter-spacing: 0.0px;">Альтернатива веб-сервиса - это прямая интеграция с базой данных клиента.&nbsp;</span></p><p><span style="letter-spacing: 0.0px;">Данный способ редкий, но все же есть, в основном через интеграгратора Никфорт.</span></p><h2><strong><br /></strong></h2><h2><strong>1.Проработка модели данных</strong></h2><p><strong><strong>Очень важный этап!</strong>&nbsp;</strong>важно проработать заранее, чтобы не вносить потом изменения в интеграцию постоянно.<strong><br /></strong></p><ol><li>Получить от клиента модель данных CRM:<ol><li><p>Для каждой сущности обязательны поле &quot;Дата создания&quot;</p></li><li><p>Для каждой сущности надо сопоставить сущность в Smartis, например: Leads у клиента, это Договоры купли-продажи в Smartis</p></li><li><p>У каждой сущности должны быть контакты: номер телефона и email, либо ссылка на контакт.</p></li><li><p>Для веб-сервисов обязательна возможность выбрать все сущности по дате создания, например: отдай мне все сделки, созданные за 12 декабря 2024-го года</p></li><li><p>Для веб-сервисов желательна возможность выбрать все сущности по дате изменения, например: отдай мне все сделки, изменённые за 12 декабря 2024-го года</p></li><li><p>Для всех сущностей, кроме контактов, обязательно должно быть заполнено поле &quot;ЖК&quot;<br /><strong>Пример модели данных:&nbsp;<br /><ac:structured-macro ac:name="view-file" ac:schema-version="1" ac:macro-id="15cba276-08c5-4f06-98ec-39525f4babad"><ac:parameter ac:name="name"><ri:attachment ri:filename="Модель данных для Smartis.docx" /></ac:parameter><ac:parameter ac:name="height">250</ac:parameter></ac:structured-macro></strong></p></li></ol></li><li>Многие клиенты просят отправить рекомендации, какие поля нужны в аналитике. Можете отправлять им этот&nbsp;&nbsp;</li><li>На нашей стороне нужно ответственно отнестись к модели, самостоятельно ПМу разобрать и предоставить рекомендации клиенту. Можно опираться на рекомендации или поможет Катя.&nbsp;</li><li>Согласовать финальный список полей и сущностей.</li></ol><p>Кратко по полям:&nbsp;Важно иметь заполненные поля источников, брокеров, объектов, контактов, даты встреч/бронирования/подписания, и те поля, по которым будут фильтроваться целевые метрики.&nbsp;</p><p>Клиент заранее должен понимать, как фильтровать целевые метрики!</p><p>После того как модель согласована клиент начинает разрабатывать веб-сервис.&nbsp;<br /><strong><br /></strong><br /><strong>2. Разработка веб-сервиса&nbsp;</strong></p><ol><li>Предоставляем рекомендации по веб-сервису&nbsp;</li></ol><p><br /></p><p><ac:structured-macro ac:name="view-file" ac:schema-version="1" ac:macro-id="c0a13bec-1738-45e2-be9e-9a9185978678"><ac:parameter ac:name="name"><ri:attachment ri:filename="Рекомендации по созданию web-сервиса (2).docx" /></ac:parameter><ac:parameter ac:name="height">250</ac:parameter></ac:structured-macro></p><ol><li>Клиент на своей стороне начинает разработку веб-сервиса своими силами.</li></ol><p><strong>Важно!</strong>&nbsp;Мы веб-сервисы не разрабатываем самостоятельно для них!</p><p>&nbsp; &nbsp; &nbsp; 3.&nbsp; После этого клиент предоставляет API документацию и токен/доступы для настройки интеграции с этим веб-сервисом.&nbsp;</p><p><br /></p><h2><strong>3. Разработка интеграции с веб-сервисом/напрямую с БД на нашей стороне.</strong></h2><ol><li>Ставим задачу на нашу разработку по созданию интеграции, прописываем доступы и Апи, вкладываем модель данных.</li><li>Задача проходит валидацию, после этого клиента можем ориентировать, когда возьмем в работу и сколько будет делаться интеграция.&nbsp;</li><li>После нужно положить в спринт.</li><li>Интеграция разрабатывается где-то 2 недели- месяц в зависимости от того, кто делает.(по старинке)</li><li><strong>ВАЖНО!</strong> Теперь мы настраиваем интеграцию только через endpoint, но ее так же настраивает разработчик&nbsp;<ac:link><ri:page ri:content-title="4. CRM Endpoint" /></ac:link></li><li>Синхронизируются исторический данные за последний год, контакты за весь период.</li><li>После разработчик отдает готовую интеграцию ПМу.&nbsp;<br /><br /></li></ol><h2><strong>4. Тестирование.&nbsp;</strong></h2><p>Один из сложных этапов!</p><ol><li>Менеджер проверяет готовую интеграцию и сверяет поля в каждой сущности с моделью данных. Обычно здесь проблем нет.</li><li>Проверить все ли фильтры по этим полям добавились, можно это совместить с первой задачей.&nbsp;</li><li>Проверяем добавились ли поля дат в фильтры &quot;Календарь&quot;.</li><li>Появились ли в коннекторе все необходимы поля для привязки по объектам.&nbsp;</li><li>Кол-во сырых сущностей с заполненными контактами, без контактов должно быть менее 2% данных.</li><li>Проверить логику удаленных данных. Должен быть фильтр &quot;Сущность удалена равно/не равно 1/0.&nbsp;</li><li>Проверить, что синхронизация данных работает на ежедневной основе.&nbsp;<br /><br /></li></ol><h2><strong>5. Сверка.</strong></h2><p>Один из сложных этапов!</p><p>Необходимо на этот этап закладывать 2 недели минимум.&nbsp;</p><p><strong>Алгоритм если данные сходятся (идеальный мир):</strong></p><ol><li>Тестирование происходит на тестовом сайте.&nbsp;</li><li>Запрашиваем у клиента сырые итоговые числа по каждой сущности за тестовый месяц. Сырые - это все данные которые находятся в каждой таблицы модели данных без каких-либо фильтров.&nbsp;</li><li>Если сходится увеличиваем период за последний год. (может быть допустимый % расхождений в 1% - это нормально)</li><li>После того, как все месяца сошлись начинаем сверяем целевые метрики.</li><li>Строим целевые метрики по ТЗ.</li><li>Запрашиваем у клиента итоговые числа за последний год по целевым метрикам. Целевые обращения, Успешные встречи, Платные брони, Успешные сделки.&nbsp;</li><li>&nbsp;Сверяем за последний год. Расхождений быть не должно.&nbsp;</li><li>Далее привязываем коннектор к проектам и сверяем данные по объектам.</li><li>Здесь по такой же логике сверяемся.</li><li>Добиваемся100% сходимости в разрезе объектов.&nbsp;<br /><br />&nbsp;</li></ol><p><strong>Алгоритм если данные НЕ сходятся (реальный мир):</strong></p><ol><li>Тестирование происходит на тестовой сайте.</li><li>Запрашиваем у клиента сырые итоговые числа по каждой сущности за тестовый месяц.&nbsp;</li><li>Не сходится - просим выгрузку у клиента и сверяем с помощью ВПР по id почему не сходится.&nbsp;</li><li>Если у нас меньше смотрим у нас те ID, которые не попали и есть ли они вообще.</li><li>Если у клиента меньше, то отправляем ему ID, чтобы он посмотрел почему он их не считает.&nbsp;</li><li>Скорее всего здесь нужно вносить какие-то правки в интеграцию и снова синхронить.</li><li>Повторно сверяемся и ходим так по кругу, пока не сойдутся данные.&nbsp;</li><li>Далее сверяем за год по такой же логике.&nbsp;</li><li>Следующий этап сверка целевых за год, запрашиваем у клиента итоговые числа.&nbsp;</li><li>Не сходимся - запрашиваем выгрузки, ВПРим детально по id.</li><li>У нас больше - значит не учитываем какой-то фильтр. У клиента - смотрим по id почему не попало в целевые.&nbsp;</li><li>Скорее всего нужно будет постоянно менять фильтрацию целевых, потому что клиенты не знают, как у них фильтруются данные.&nbsp;Или вносить изменения в интеграцию и добавлять поля, которые клиент не учел.&nbsp;</li><li>Добиваемся 100% сходимости по целевым.</li><li>Далее привязываем коннектор к проектам и сверяем данные по объектам.</li><li>Здесь по такой же логике, если не сходится - запрашиваем выгрузку и сверяемся по ID.</li><li>Добиваемся 100% сходимости в разрезе объектов.&nbsp;<br /><br /><br /></li></ol><h2><span style="color: rgb(0,51,102);">Распространенные кейсы расхождений по данной интеграции:</span></h2><ol><li>Непроработанная модель данных, не учли то поле, которое используется в целевых. Клиент не знает, как фильтруются целевые.</li><li>Технические ошибки при создании интеграции, зависит от разработчика, который ее будет делать.</li><li>Плохо работает фильтр по удаленным сущностям.&nbsp;</li><li>Наша интеграция отличается от модели данных, которая у клиента. Например, если в 1 элементе у клиента указывается 2 ЖК, а мы сделали множество элементов и создаем 2 элемента с теми же данными, только по разным ЖК.</li><li>Не отработала синхронизация обновления полей.&nbsp;</li></ol></ac:layout-cell><ac:layout-cell><p><ac:structured-macro ac:name="toc" ac:schema-version="1" ac:macro-id="0fb9ba44-eb25-4f1e-8f63-325c55bded73" /></p></ac:layout-cell></ac:layout-section></ac:layout>