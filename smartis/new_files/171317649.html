<h3>Несколько клиентов внутри одной коробки</h3><p>Это не то чтобы уникальный функционал для конкретной коробки, скоро такая возможность будет во всех коробках, но сейчас только у ЛСР реализовано.<br /><br /></p><ul><li>Добавлен новый клиент в коробку&nbsp;<strong>lsr.rumsk</strong> [2262]<br />Клиент создается в облаке, затем добавляется в коробку, с такими же данными как и в облаке.<br />Так же добавляется в <strong>box_clients</strong> и в облаке и в коробке, т.к. это коробочный клиент, у него свой&nbsp;<strong>box_token</strong>, <strong>auth_token&nbsp;</strong>как у отдельной коробки.</li><li>В <strong>menu</strong> добавляем/включаем пункт меню <strong>Клиенты</strong>, что бы была возможность переключаться между клиентами в коробке.</li><li>Нужным менеджерам включаем доступ к XRM, <strong>isXrmUser&nbsp;= 1</strong>.<br /><br /></li></ul><h3>Особенности анализа&nbsp;</h3><p>В рамках задачи (<a href="https://app.asana.com/0/1200331691099740/1205797042785859/f">https://app.asana.com/0/1200331691099740/1205797042785859/f</a>) добавили доработку. У клиента&nbsp;интерес в СРМ создается после того, как поступил звонок, эти события в CJM клиента должны располагаться в таком порядке: звонок, интерес. Чтобы они не располагались наоборот: интерес, звонок, и интересы не попадали в &quot;другое&quot; - тк дата интереса &lt; даты обращения комэджик</p><p>В анализе увеличен временной интервал между CRM элементом и касанием (любыми касаниями с рекламой) - до 1 часа (если больше, то считаем, что CRM элемент никак не связан с касанием). В рамках 1 часа если поступили интерес и касание, то мы связываем касание с событием в СРМ и таким образом для события в срм источник определяется на основе источника, с которого поступило касание.</p><p><br /></p><h3>Функционал простановки PID в сообщения мессенджеров</h3><p>Зачем нужен: у клиента в целевых лидах был заполнен источник &quot;заявка из Whatsapp&quot; - с мобильной версии сайта можно оставить обращение в вотсап, это уходит в срм клиента и там создается лид куда проставляется источник&nbsp;&quot;заявка из Whatsapp&quot;. У нас такие лиды попадали в &quot;Другое&quot;.<br />Что мы сделали: настроили передачу PID по цепочке Whatsapp=&gt; CRM =&gt; Smartis, и на основе этого получили возможность определить рекламный источник этих обращений. <br />Как это работает: в коде сайта есть PID, когда клиент нажимает на кнопку обращения whatsapp, наш PID проставляется в самом обращении - это выглядит так:<br /><br /><ac:image ac:height="250"><ri:attachment ri:filename="Снимок экрана 2024-01-18 в 12.05.45.png" /></ac:image></p><p>Как только клиент отправляет ответное сообщение в чате, в срм создается лид и туда вставляется PID в поле, которое создается на стороне клиента в срм в сущности Интерес (это у клиента лиды).<br />Далее, тк с клиентом настроена интеграция в формате Импорт API, мы дополнили шаблон этим кастомным полем с PID и начали его себе тоже забирать</p><p>В смартис добавили фильтр по этому полю:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="Снимок экрана 2024-01-18 в 12.08.43.png" /></ac:image></p><p>на основе PID мы можем определить источник клиента - в данные, которые мы считыаем по сессии нашим кодом на сайте, также есть PID - таким образом мы сопоставляем PID из сообщения whatsapp и pid из сессии и можем определить рекламный источник. Это позволяет также склеить сразу срм элемент и сессию и находить дополнительно источники касаний у лидов, по которым без этого мы бы скорее всего не узнали рекламный источник.</p><p><ac:image ac:width="700"><ri:attachment ri:filename="Снимок экрана 2024-01-18 в 12.11.37.png" /></ac:image></p><p>Бывают все равно кейсы, когда заполнен PID, но интерес находится в другом. Чтобы проверить корректность работы функционала в таком случае, нужно:</p><ul style="list-style-type: square;"><li>построить отчет по показателю Посетители Смартис + фильтр PID_id (идентификатор браузера) равно &quot;вставить значение из поля с PID&quot; и проверить, что сессии есть.</li></ul><p>если сессии нет, то могут быть разные причины - например, мы могли не забрать эту сессию из облака.&nbsp;<br /><br /><br /></p><p><strong>Оцифровка форм</strong></p><p>Для клиента ранее была организовала оцифровка форм на сайте через инструмент&nbsp;<span style="color: rgb(89,102,103);">SmartCallBack. Оцифровку делали<span style="color: rgb(0,0,0);">&nbsp;в порядке исключения, потому что у комеджика не была готова эта функциональность.</span></span></p><p><span style="color: rgb(89,102,103);"><span style="color: rgb(0,0,0);">На 31.07.2024 все формы должны оцифровываться комеджиком (коллегам из ЛСР по этому вопросу требуется обращаться к коллегам из комеджика).&nbsp;</span></span></p><p><span style="color: rgb(89,102,103);"><span style="color: rgb(0,0,0);">Повторять исключение и заводить формы через смартис не требуется.&nbsp;</span></span></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2024-7-31_13-5-10.png" /></ac:image></p><p><br /></p><h3>Особенности работы когортной логики</h3><p><span style="color: rgb(30,31,33);">Чтобы показатель оказался в списке когортных, необходимо, чтобы для этого показателя работал фильтр по ID персоны.</span></p><p><ac:image ac:width="500"><ri:attachment ri:filename="Снимок экрана 2024-10-08 в 09.57.25.png" /></ac:image></p><p>Для того, чтобы у показателя работал фильтр ID персоны необходимо:<br />* Либо явная связь показателя с фильтром у нас в базе<br />* Либо связь компонентов показателя (всех родительских показателей) с этим фильтром</p><p>Целевые лиды строятся на показателе <code>CRM: Лиды</code><br />Который, в свою очередь состоит из показателя <code>Интересы</code></p><p><span>Если у нас записано, что</span> показатель <code>Интересы</code>&nbsp;строится на базе неактивного показателя <code><span>Кол-во лидов</span></code><br />И вот у этого показателя <code>Кол-во лидов</code>:<br />* В облаке есть связь с фильтром по ID персоны<br />* А в коробке этой связи нет <br /><span>то это баг</span></p><p><span>Почему может не работать когорта:</span></p><ol class="RichTextList-numbered"><li><p>После разворачивания коробки кто-то специально делал, чтобы работала когорта с показателей на интересах. И мы эти правки потеряли (так случилось с ЛСР)</p></li><li><p>Таки в последнее время произошло изменение показателя в цепочке от целевых лидов до CRM: Лиды включительно</p></li></ol><h3><br /><br /></h3><p><br /><br /><br /></p>