<ac:layout><ac:layout-section ac:type="two_right_sidebar"><ac:layout-cell><p>Кампании Smartis - это отдельная сущность, которая позволяем детализировать данные глубже площадок.</p><p>Кампании могут отображаться, как в конструкторе, так и в дашборде.&nbsp;</p><h3>Для чего нужна</h3><p>В площадках используется разные рекламные кампании, которые настраиваются по определённым параметрам.</p><p>Рассмотрим пример на площадке Яндекс Директ, в Директе есть разный тип кампаний, Поиск. Сети, бренд/не бренд, Гео и т.д. кампании по поиску могут настраиваться на разную аудиторию по разным ключевым словам, с разными объявлениями. Таким образом поверхностно оценивать эффективность площадки можно, но лучше детализироваться дальше до кампаний, объявлений и ключевых слов, чтобы понять какая кампаний я отрабатывает лучше и усилить ее, а какие не работают отключить или изменить алгоритм выдачи.&nbsp;&nbsp;</p><h3><span style="color: rgb(0,0,0);">Алгоритм формирования</span></h3><p><span style="color: rgb(0,0,0);">Кампании Smartis, формируется по определённому алгоритму, она забирает информацию из рекламных кампаний в кабинетах ЯД, VK, MT, если нет кампании забирает информацию из UTM- campaign или источник из коллтрекинга.</span></p><p><span style="color: rgb(0,0,0);">Алгоритм более детально:</span></p><ol><li><span style="color: rgb(0,0,0);">Ищем в utm_campaign ид кампании (любая последовательность из более 5 цифр) =&gt; кампания из кабинета ЯД</span></li><li><span style="color: rgb(0,0,0);">Ищем по utm_campaign и по названию кампании&nbsp;=&gt; кампания из кабинета ЯД<br /></span></li><li><span style="color: rgb(0,0,0);">Ищем в utm_term ид кампании (любая последовательность из более 5 цифр) =&gt; кампания из кабинета ЯД</span></li><li><span style="color: rgb(0,0,0);">Ищем в utm_content&nbsp;ид кампании (любая последовательность из более 5 цифр) =&gt; кампания из кабинета ЯД<br /></span></li><li><span style="color: rgb(0,0,0);">Ищем по наличию utm_campaign в существующих у нас кампаниях по external_id =&gt; кампания найденного объявления</span></li><li><span style="color: rgb(0,0,0);">Ищем по точному соответствию utm_campaign в касании с utm_campaign в объявлениях =&gt; кампания найденного объявления</span></li><li><span style="color: rgb(0,0,0);">Если не пуст referrer, то извлекаем из него utm метки и применяем логику из п.1</span></li><li><span style="color: rgb(0,0,0);">Если не пуст utm_campaign - то кампания = utm_campaign</span></li><li><span style="color: rgb(0,0,0);">Если не пуст статический РК - то кампания = РК</span></li><li><span style="color: rgb(0,0,0);">Кампания = Не указано</span></li><li><span style="color: rgb(0,0,0);">Если по описанным выше условиям не найдена РК, то создаем кампанию Smartis</span></li></ol><p><span style="color: rgb(0,0,0);"><br /></span></p><h3><span style="color: rgb(0,0,0);">Также кампании может не быть в ряде случаев:</span></h3><ol><li><span style="color: rgb(0,0,0);">органический трафик - у них нет кампаний, у них есть только то, в каком поисковом сервисе был переход.&nbsp;</span></li><li><span style="color: rgb(0,0,0);">реферальный трафик - тоже никаких кампаний не существует. Это просто реферальный трафик с какого-то сайта.</span></li><li><span style="color: rgb(0,0,0);">Прямой трафик - когда человек сам вручную вбил в адресную строку на какой сайт он хочет перейти. В таком случае также не может идти речи о кампаниях.&nbsp;</span></li><li><span style="color: rgb(0,0,0);">Ряд других источников также могут не иметь кампаний. Поэтому нужно всегда смотреть на природу того канала, который рассматривается в данный момент. Например, при рассылке СМС маркетологами - если они сами не вшивают ЮТМ в данные ссылки - невозможно будет отследить кампанию.&nbsp;</span></li></ol><p><span style="color: rgb(0,0,0);"><br /></span></p><h4><span style="color: rgb(0,0,0);">Для Разработчиков</span></h4><p><span style="color: rgb(0,0,0);">Сохранение кампаний происходит в методе&nbsp;<em>CampaignsManager::<span class="line" lang="php"><span class="n">saveCampaigns</span></span></em></span></p><p><span style="color: rgb(0,0,0);">Алгоритм метода следующий:</span></p><ul><li>Сначала мы ищем кампании у нас в smartis_campaigns по прямому сравнению входящего ид рк с&nbsp;<span style="color: rgb(106,135,89);">external_id</span>. Запрос выполняется почти моментально</li><li>Далее мы получаем ид кампаний, которые мы не нашли у себя в таблице</li><li>Затем в той же таблице ищем РК по LIKE выражению, поскольку бывали случаи, когда рк хранилась у нас с каким-то префиксом. Собственно, склейка должна была произойти, но рк не находилась из-за префикса. Этот запрос выполняется дольше предыдущего</li><li>Под конец мы меняем external_id у наших рк, найденных по LIKE-поиску, чтобы в следующей синхронизации эта рк нашлась в первом же запросе</li></ul><p><br /></p><h3>Как отобразить&nbsp;</h3><p>В разрезе кампаний можно разложить все показатели crm и показатели из маркетинговых сервисов.&nbsp;</p><ol><li>Можно разложить в группировке кампании в конструкторе и дашборде:&nbsp;</li></ol><p><ac:image ac:height="400"><ri:attachment ri:filename="image2023-12-11_18-38-41.png" /></ac:image></p><p><br /></p><p>2.&nbsp; Провалиться из группировки каналы и площадки в конструкторе и дашборде:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2023-12-11_18-40-27.png" /></ac:image><br /><ac:image ac:height="400"><ri:attachment ri:filename="image2023-12-11_18-42-24.png" /></ac:image></p><p>3.&nbsp; Создать категорию кампаний через конфигуратор и разложить по категории. <a href="https://docs.uiscom.ru/pages/viewpage.action?pageId=143631193">Подробнее про создание категорий кампаний в конфигураторе.</a></p><p>В данному случае сделана группировка по агентствам. Можно сделать по категориям кампаниям , городам, и другим параметрам на усмотрение клиента. Категории кампании так же можно детализировать на кампании, а кампании дальше можно детализировать на <a href="https://docs.uiscom.ru/pages/viewpage.action?pageId=171322877">объявления</a> и <a href="https://docs.uiscom.ru/pages/viewpage.action?pageId=171322879">ключевые слова</a>.&nbsp;</p><p><ac:image ac:height="400"><ri:attachment ri:filename="image2023-12-11_18-49-7.png" /></ac:image></p><p><br /></p><p>Чтобы категории кампаний категорировались на те данные, которые необходимо обязательно нужно соблюдать условия <a href="https://docs.uiscom.ru/pages/viewpage.action?pageId=171326587">UTM-разметки</a>.&nbsp;</p><p><br /></p><p><br /></p></ac:layout-cell><ac:layout-cell><p><ac:structured-macro ac:name="toc" ac:schema-version="1" ac:macro-id="ca754250-86ef-40dc-993f-5ef504ecdd33" /></p></ac:layout-cell></ac:layout-section></ac:layout>