<p><span style="color: rgb(0,0,0);">AI- ассистент работает через интеграцию ChatGPT с телеграм в группе&nbsp;<strong>Smartis_AI группа. </strong>Он обучен на нашей документации из Confluence и отвечает на вопросы по работа Смартис, а также может помочь с другими вопросами (примеры указаны ниже)</span></p><p><span style="color: rgb(0,0,0);">В группу добавляются все сотрудники Смартис (особенно новые РМ). Добавлять участников могут админы и другие участники группы. Администраторы в группе: Вика Гаврилова и бот&nbsp;<strong>Smartis_AI. Бот обязательно должен быть админом!!!</strong></span></p><p><span style="color: rgb(0,0,0);">Для того, чтобы задать вопрос ассистенту, нужно написать обычное сообщение в чат (без команд, без тегов, без ответа на какое-то сообщение).&nbsp;</span></p><p><span style="color: rgb(0,0,0);">После получения ответа для оценки кач-ва работы ассистента, пишем &quot;да&quot; если ответ полезен и &quot;нет&quot; если не полезен. Это нужно для того чтобы мы видели какой % вопросов бот помогает решить.</span></p><p><span style="color: rgb(0,0,0);">Статистика по % полезный и не полезных ответов собирается тут:&nbsp;<span style="color: rgb(0,0,255);"><a href="https://docs.google.com/spreadsheets/d/1Ui218jLc1QYwQw1_d4FOnZLJQ6xgW6KOQgN4APa8QI0/edit?gid=0#gid=0"><span style="color: rgb(0,0,255);">https://docs.google.com/spreadsheets/d/1Ui218jLc1QYwQw1_d4FOnZLJQ6xgW6KOQgN4APa8QI0/edit?gid=0#gid=0</span></a></span></span></p><p><span style="color: rgb(0,0,0);">На момент релиза (30.09) % полезных ответов 60%.</span></p><p><span style="color: rgb(0,0,0);"><ac:image ac:height="250"><ri:attachment ri:filename="Снимок экрана 2024-09-30 в 11.37.27.png" /></ac:image></span></p><h3 style="margin-left: 36.0pt;"><span style="color: rgb(0,0,0);">Какие задачи можно решать с помощью ассистента:</span></h3><ol><li style="list-style-type: decimal;"><p><span style="color: rgb(0,0,0);">Быстрая Консультация по Функционалу Смартиса. </span><br /><span style="color: rgb(0,0,0);">Примеры вопросов:</span></p></li><ol><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">Как использовать фильтры в Смартис?</span></p></li><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">Какие отчеты можно создать в Смартис для анализа эффективности рекламных кампаний?</span></p></li><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">как подключить интеграцию с вк в смартис?</span><br /><br /></p></li></ol><li style="list-style-type: decimal;"><p><span style="color: rgb(0,0,0);">Помощь в построении отчетов</span><br /><span style="color: rgb(0,0,0);">Примеры вопросов:</span></p></li><ol><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">Как построить отчет по анализу брокеров?</span></p></li><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">Как построить отчет чтобы в него попадали активности, после которых нет сделок?</span></p></li><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">какие показатели нужно включить в отчет по контексту?</span><br /><br /></p></li></ol><li style="list-style-type: decimal;"><p><span style="color: rgb(0,0,0);">Решение конкретных задач клиента</span><br /><span style="color: rgb(0,0,0);">Примеры вопросов:</span></p></li><ol><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">Клиент хочет анализировать конверсию по различным каналам. Как лучше это сделать в Смартис?</span></p></li><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">Как помочь клиенту оптимизировать расходы на рекламу через Смартис?</span></p></li><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">клиент хочет отслеживать как реклама влияет на то что брокеры приводят сделки. как с помощью смартис это сделать</span><br /><br /><br /></p></li></ol><li><span style="color: rgb(0,0,0);">Помощь в составлении регулярных выражений.</span><br /><span style="color: rgb(0,0,0);">Примеры вопросов:</span></li><ol><li style="list-style-type: decimal;"><ol><ol><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">Мне нужно создать регулярное выражение, которое выделит все городские номера телефонов (которые начинаются не на 79).как это сделать?</span></p></li><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">Нужно ли в регулярном выражении [пример] экранировать символ Х?</span></p></li><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">как прописать регулярное выражение &ldquo;не равно&rdquo;?</span></p><p><br /></p></li></ol></ol></li></ol></ol><p style="list-style-type: lower-alpha;"><br /></p><p><span style="color: rgb(0,0,0);">5. Быстрое составление ответов клиентам на простые вопросов</span></p><p><br /></p><ol><ol><li style="list-style-type: decimal;"><p><span style="color: rgb(0,0,0);">Примеры вопросов:</span></p><ol><ol><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">куда устанавливать код смартис?</span></p></li><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">можно ли в смартис менять местами дашборды?</span></p><p><span style="letter-spacing: 0.0px;color: rgb(0,0,0);"><br /></span></p></li></ol></ol></li></ol></ol><p style="list-style-type: lower-alpha;"><br /></p><p><span style="letter-spacing: 0.0px;color: rgb(0,0,0);">6. Помощь в составлении ответов клиентам и подготовке к встречам</span></p><p><br /></p><ol><ol><li style="list-style-type: decimal;"><ol><li style="list-style-type: decimal;"><p><span style="color: rgb(0,0,0);">Примеры вопросов</span></p></li><ol><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">Помоги вежливо ответить клиенту</span></p></li><li style="list-style-type: lower-alpha;"><p><span style="letter-spacing: 0.0px;color: rgb(0,0,0);">Напиши план встречи с клиентом на тему &ldquo;Почему смартис плохой&rdquo;. Нам важно доказать что &hellip;</span></p></li></ol></ol></li></ol></ol><p style="list-style-type: lower-alpha;"><br /></p><p><span style="letter-spacing: 0.0px;color: rgb(0,0,0);">7. Ответы на организационные вопросы (на основе того что описано в конфлюенс)</span></p><p><br /></p><ol><ol><ol><li style="list-style-type: decimal;"><p><span style="color: rgb(0,0,0);">Примеры вопросов:</span></p></li><ol><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">как оформить отпуск?</span></p></li><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">как поставить задачу в jira юристу?</span></p></li><li style="list-style-type: lower-alpha;"><p><span style="color: rgb(0,0,0);">как оформить командировку?</span></p></li></ol></ol></ol></ol><div><h3 style="margin-left: 36.0pt;"><span style="color: rgb(0,0,0);">Лайфхаки использования</span></h3><ol><li style="list-style-type: decimal;"><p><span style="color: rgb(0,0,0);">Пока бот сырой - перепроверяйте информацию в конфлюенс или уточняйте у коллег</span></p></li><li style="list-style-type: decimal;"><p><span style="color: rgb(0,0,0);">Если бот пишет фигню или отвечает вообще не на то что нужно, задайте вопрос в более точной формулировке.</span></p></li><li style="list-style-type: decimal;"><p><span style="color: rgb(0,0,0);">Сейчас бот не запоминает контекст, поэтому он не может поддерживать связную беседу. </span><br /><span style="color: rgb(0,0,0);">Плохой пример вопроса: </span><br /><span style="color: rgb(0,0,0);">вопрос - Как подключить срм в смартис?</span><br /><span style="color: rgb(0,0,0);">ответ - про коннектор CRM</span><br /><span style="color: rgb(0,0,0);">вопрос с уточнением -&nbsp; Я про амо срм</span><br /><span style="color: rgb(0,0,0);">ответ - напишет общую инфу про амо срм, тк не понял из контекста что вы хотите также подключить интеграцию с амо срм.</span><br /><br /><span style="color: rgb(0,0,0);">Хороший уточняющий вопрос: Как подключить интеграцию с амо срм в смартис?</span></p></li></ol><div><span style="color: rgb(0,0,0);"><br /></span></div><div><span style="color: rgb(0,0,0);"><br /></span></div><h3><span style="color: rgb(0,0,0);">Поддержка работы ассистента и интеграции</span></h3><div>Запросить доступы OpenAI в чате по Администрированию Smartis.AI</div><h4><span style="color: rgb(0,0,0);">1.Пополнение баланса в OpenAI</span></h4><p><span style="color: rgb(0,0,0);">Для работы бота необходимо пополнять credits в нашем аккаунте Open AI. Для этого нужно:</span></p><ul style="list-style-type: square;"><li><span style="color: rgb(0,0,0);">зайти в наш аккаунт в OpenAI</span></li><li><span style="color: rgb(0,0,0);">привязать иностранную карту</span></li><li><span style="color: rgb(0,0,0);">пополнить баланс на иностранной карте</span></li><li><span style="color: rgb(0,0,0);">пополнить кредитсы (10$ хватает на 2-3 месяца)</span></li></ul><p><br /></p><h4>2. Обновление документации - чтобы бот отвечал на вопросы по новым функционалам/изменениям в работе старых функционалов</h4><p>Для актуализиации документации в боте необходимо 1 раз в 2 недели обновлять файлы (загружать доки из конвлюенс постранично). за этот процесс отвечает Артем Артамонов&nbsp;<a href="https://t.me/cristal_arti" style="letter-spacing: 0.0px;">https://t.me/cristal_arti</a></p><p>Инструкция по обновлению докментации:&nbsp;<a href="https://docs.google.com/document/d/1oxwwgtkaR0zDib4XCZ4fp6Vvm2q2RXhJEPnDVWSsFMM/edit">https://docs.google.com/document/d/1oxwwgtkaR0zDib4XCZ4fp6Vvm2q2RXhJEPnDVWSsFMM/edit</a></p><p><br /></p><h4>3.Контроль работы интеграции в Make</h4><p>Интеграция между OpenAI и Telegram настроена через no-code платформу Make. В Make у нас платная подписка (минимальный платный план - <span style="color: rgb(51,51,51);">Core, за 10$ в месяц. Оплачивал Дима Кудинов</span>).</p><p><br />Запросить доступы Make в чате по Администрированию Smartis.AI</p><p><br /></p><p>У нас 1 активный сценарий интеграций:<br /><br /><ac:image ac:width="600"><ri:attachment ri:filename="Снимок экрана 2024-09-30 в 12.01.26.png" /></ac:image></p><p><ac:image ac:width="600"><ri:attachment ri:filename="Снимок экрана 2024-09-30 в 12.14.18.png" /></ac:image></p><p>Как он работает:</p><ol><li>Модуль Telegram (Watch updates) - отвечает за то, что смотрит обновления в группе - то есть отслеживает сообщения, которые участники группы пишут в чат. Далее он направляет сообщения в модуль Router</li><li>Модуль Router отправляет сообщения из ТГ в 2 места:<br /><ol><li>в Гугл таблицу (модуль Google Sheets - Add a row) - если сообщение содержит &quot;да&quot; или &quot;нет&quot; - это нужно для сбора статы по кач-ву ответов бота.</li><li>в OpenAI - все сообщения.&nbsp;<br /><br /></li></ol></li><li>Модуль&nbsp;Google Sheets - Add a row никуда ничего не отправляет. Он собирает&nbsp;сообщение сообщения, которые содержат &quot;да&quot; или &quot;нет&quot; - это нужно для сбора статы по кач-ву ответов бота.<br /><br /></li><li>Модуль&nbsp;OpenAI - Message an Assistant - доставляет сообщения из телеграм в нашего Ассистента в OpenAI. Ассистент, который у нас используется, называется<strong>&nbsp;smartis.ai. </strong>Результатом работы этого модуля является ответ ChatGPT на вопрос пользователя из Телеграм.<strong><br /><br /></strong></li><li>Модуль Ignore нужен для обработки ошибок - если получим ошибку от OpenAI, он позволяет проигнорировать ошибку и НЕ останавливать работу сценария из-за ошибки. Он не работает с сообщениями, отслеживает только ошибки<br /><br /></li><li>Модуль Telegram - Send a text message or reply&nbsp; - присылает сообщения от ассистента из Open AI в телеграм.</li></ol><p><br /></p><h3>Что делать если бот перестал отвечать</h3><p>Обычно ответ бота занимает до 2 минут. Однако если ответа нет 5 минут и более, нужно проверить не отключился ли сценарий. Make отключает его автоматически при ошибках. И хотя у нас есть модуль Ignore, который игнорирует ошибки в OpenAI, могут быть ошибки в других модулях, из-за чего интеграция тоже может отвалиться.</p><p>При такой ситуации делаем следующие шаги:</p><ol class="ProsemirrorEditor-list"><li class="ProsemirrorEditor-listItem"><p>переходим по ссылке <a class="ProsemirrorEditor-link" href="https://eu2.make.com/628780/scenarios/1561628/edit">https://eu2.make.com/628780/scenarios/1561628/edit</a></p></li><li class="ProsemirrorEditor-listItem"><p>вводим данные</p></li></ol><p>3. открываем вкладку Scenarios<br /><br /><ac:image ac:height="250"><ri:attachment ri:filename="Снимок экрана 2024-09-30 в 12.17.14.png" /></ac:image></p><p>если справа кнопка фиолетовая и написано ON, значит все ок</p><p><ac:image ac:width="600"><ri:attachment ri:filename="Снимок экрана 2024-09-30 в 12.17.59.png" /></ac:image></p><p>если кнопка выглядит серой - значит отключилось</p><p><ac:image ac:width="600"><ri:attachment ri:filename="Снимок экрана 2024-09-30 в 12.17.45.png" /></ac:image></p><p>в случае отключения из-за ошибки рядом будет еще красный значок</p><p>4. Чтобы посмотреть ошибку, кликаем на сам сценарий</p><p><ac:image ac:width="600"><ri:attachment ri:filename="Снимок экрана 2024-09-30 в 12.18.24.png" /></ac:image></p><p>5. При наличие ошибки внутри будет такая картинка</p><p><ac:image ac:width="600"><ri:attachment ri:filename="Снимок экрана 2024-09-30 в 12.18.49.png" /></ac:image></p><p>6. кликаем на значок 1 возле иконки ТГ и раскрываем Message - смотрим какое сообщение отправили.</p><p><ac:image ac:width="600"><ri:attachment ri:filename="Снимок экрана 2024-09-30 в 12.19.12.png" /></ac:image></p><p>в этом примере кто то написал команду, и бот не распознал это как текст сообщения. такую ситуацию даже можно дальше не изучать, а просто перейти в раздел Webhooks и очистить очередь. Также отмечу, что такие ошибки у нас автоматически игнорирует модуль IGNORE.</p><p><ac:image ac:width="600"><ri:attachment ri:filename="Снимок экрана 2024-09-30 в 12.20.02.png" /></ac:image></p><p>7. нажимаем на иконку</p><p><ac:image ac:width="600"><ri:attachment ri:filename="Снимок экрана 2024-09-30 в 12.20.27.png" /></ac:image></p><p>открывается очередь. Рекомендуется удалить все хуки</p><p>8. далее переходим обратно на вкладку Scenarios и переводим бегунок активности сценария в положение ON</p><p><ac:image ac:width="600"><ri:attachment ri:filename="Снимок экрана 2024-09-30 в 12.21.09.png" /></ac:image></p><p>9.&nbsp;обновляем страницу - все должно включиться) и тк мы удалили хуки, надо переотправить в чате в ТГ вопросы без ответа. просто копируем сообщения от РМ и отправляем заново НО обязательно не все сразу, тк иначе получим превышение лимита в минуту. В идеале отправлять 1 сообщение в 1 минуту</p><p>также бывает ошибка из-за превышения лимитов в chatgpt. выглядит она так:</p><p><ac:image ac:width="600"><ri:attachment ri:filename="Снимок экрана 2024-09-30 в 12.22.20.png" /></ac:image></p><p>такую ошибку также у нас игнорирует модуль Ignore.&nbsp;</p><p>в этом случае мы также очищаем очередь вебхук и включаем обратно сценарий. в чате переотправляем сообщения заново НО обязательно не все сразу, тк иначе получим превышение лимита в минуту. В идеале отправлять 1 сообщение в 1 минуту</p><p><br /></p><p>если будут какие-то другие ошибки, то смотреть по аналогии. обычно все решается очисткой хук и перевключением. Также, при необходимости можно добавить еще один модуль ignore на другом этапе (например, чтобы игнорировал ошибки ТГ)</p><p><br /></p><ac:structured-macro ac:name="note" ac:schema-version="1" ac:macro-id="ea70cd43-0d0e-4d65-b0bb-6064f15eea25"><ac:rich-text-body>у Make есть классный встроенный AI, который помогает ответить на любые вопросы по работе сервиса, а также он может сам вносить изменения в сценарии по вашей задаче. Поэтому можно воспользоваться им для настройки новых модулей.&nbsp;</ac:rich-text-body></ac:structured-macro><p><br /></p><h3>Как работает Ассистент в chatGPT</h3><p>Ассистент в chatGPT - это отдельно обученная модель, а не сам чат. Для просмотра настроек модели нужно авторизоваться в аккаунте OpneAI и перейти по ссылке:&nbsp;<a href="https://platform.openai.com/playground/assistants?assistant=asst_N2NLZC0Sy1sFQliQMx18xpwL">https://platform.openai.com/playground/assistants?assistant=asst_N2NLZC0Sy1sFQliQMx18xpwL</a></p><p><ac:image ac:width="600"><ri:attachment ri:filename="Снимок экрана 2024-09-30 в 12.35.37.png" /></ac:image></p><p>так выглядит окно самого ассистента.&nbsp;</p><p>в окне System Instructions написан промпт (лучше писать на англ)</p><p>Модель используем: gpt-4o-mini, она сильно дешевле.</p><p>Обязательно должна быть включена опция file search - именно она позволяет выполнять поиск информации в загруженных файлах.</p><p>Хранилище файлов с документацией (vectore store) называется Файлы документации. По клику на него откроется список загруженных файлов из конфлюенс. тут хранятся страницы с документацией а также пдф и ворд файлы, которые прикреплены к конфлюенс.</p><p>Остальные настройки ассистента должны быть как на скрине ниже:</p><p><ac:image ac:width="450"><ri:attachment ri:filename="Снимок экрана 2024-09-30 в 12.38.49.png" /></ac:image></p><p><br /></p><p>При необходимости изменить промпт, вносим изменения - они сохранятся автоматически. Рекомендуется всегда сохранять где-то в блокноте текущий промпт, в случае если изменения что-то испортили - можно будет откатить назад.</p><p><br /></p><p><strong>Другие важные ссылки для работы ассистента:</strong></p><p><strong>Бот в Телеграм: настроен был через botfather</strong></p><p>t.me/smartis_ai_bot</p><p>Use this token to access the HTTP API:</p><p>6856526054:AAE8MDaGIyNWPhIVQC3xQnecRqsAEUYl-uc</p><p>Keep your token secure and store it safely, it can be used by anyone to control your bot.</p><p>For a description of the Bot API, see this page: <a class="ProsemirrorEditor-link" href="https://core.telegram.org/bots/api">https://core.telegram.org/bots/api</a></p><p><br /></p><p><strong>Апи ключ в OpenAI</strong></p><p>sk-None-Wf9MlZz658x9EyAvkyHXT3BlbkFJsynwm8WkIJhsuq2bfOPq</p><p><br /></p><p>Архивный проект в Asana по созданию бота:&nbsp;<a href="https://app.asana.com/0/1207823658741026/1207823658741026">https://app.asana.com/0/1207823658741026/1207823658741026</a></p><p><strong><br /></strong></p><p><br /></p><p><br /></p><p><br /></p><p><br /></p><p><br /></p><p><br /></p><p><br /></p><p><span style="color: rgb(0,0,0);"><br /></span></p></div><h3><strong><br /><br /><br /></strong></h3>