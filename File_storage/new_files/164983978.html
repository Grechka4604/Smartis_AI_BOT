<p>Рекламная сеть янекса <strong>(РСЯ)</strong> позволяет добавлять параметры к рекламным ссылкам.<br />Далее по этим параметрам будут подставлены значения, которые мы можем спарсить и использовать в Smartis.<br />Полный список динамических параметров можно посмотреть <a href="https://yandex.ru/support/direct/statistics/url-tags.html#url-tags__dynamic">на сайте Яндекса</a><br /><ac:image><ri:attachment ri:filename="image2023-6-29_15-55-43.png" /></ac:image></p><p><br /></p><p>По каждому параметру в Smartis есть соответствующая группировка<br />Группировки работают с Обращениями, CRM, Сессиями.<br /><strong>За основу берутся обращения и по ним уже раскладываются другие сущности.</strong></p><p><ac:image><ri:attachment ri:filename="image2023-6-29_15-51-58.png" /></ac:image></p><p><br /></p><p>Пример хорошего отчета для управления РСЯ площадками (для идеальности еще можно CPA и конверсии добавить):</p><p><ac:image ac:height="400"><ri:attachment ri:filename="image2023-10-17_19-5-35.png" /></ac:image></p><p><br /></p><h2>Как настроить парсинг</h2><p>1 - У клиента должен быть правильный регламент, который он использует в РСЯ или можем внедрять свой, об этом в <strong>п4</strong><br /><br />2 - Должна быть настроена интеграция с ЯД<br /><br /></p><p>3 - Заходим в любую интеграцию с ЯД, достаточно настроить только 1, даже если у клиента их несколько.<br /><ac:image ac:height="400"><ri:attachment ri:filename="image2023-6-29_16-6-27.png" /></ac:image></p><p><br /></p><p>4 - Определяемся какие регламенты нужно подставить, тут есть 2 вариант:</p><ol><li>Клиент либо <strong>не использует динамические теги</strong>, либо <strong>использует всего несколько</strong> и нужно расширить их кол-во:<br /><br />Смотрим <strong>чек-лист</strong> по внедрению клиента, скорее всего там должны были проверяться регламенты для Яндекса.<br />Если нужны новые регламенты, а чек-листа нет, можно обратить внимание на пример ЮСИ, лучше все это согласовать:<br /><p><strong>utm_campaign</strong> = metka_agentstva_translitom|nazvanie_objekta_translitom|{campaign_name}|{campaign_id}|{s<br />ource_type}</p><p><strong>utm_content</strong> = {gbid}|{ad_id}|{phrase_id}|{source}|{device_type}|{banner_id}|{campaign_type}|{retargeting_id}<br />|{adtarget_id}|{position}|{position_type}|{region_id}</p><p><strong>utm_term</strong> = {keyword}<br /><br /><br /></p></li><li>Если клиент <strong>уже использует хороший регламент</strong>, со всеми нужными тегами и менять его не нужно, нам осталось <strong>правильно</strong> его прописать:<br /><br />Например клиент присылает следующий кейс:<br />?utm_source=yandex&amp;utm_medium=cpc&amp;utm_campaign=identifier_{campaign_name}_{campaign_id}|object_name|{campaign_name}|{campaign_id}|{source_type}&amp;utm_content={gbid}|{ad_id}|{phrase_id}|{source}|{device_type}|{banner_id}|{campaign_type}|{retargeting_id}|{adtarget_id}|{position}|{position_type}|{region_id}&amp;utm_term={keyword}&amp;calltouch_tm=yd_c:{campaign_id}_gb:{gbid}_ad:{ad_id}_ph:{phrase_id}_st:{source_type}_pt:{position_type}_p:{position}_s:{source}_dt:{device_type}_reg:{region_id}_ret:{retargeting_id}_apt:{addphrasestext}<br /><br />Нас интересуют&nbsp;<strong>utm_campaign</strong>,&nbsp;<strong>utm_content</strong>,&nbsp;<strong>utm_term</strong>, отсекаем лишнее и получается:<br /><p><strong>utm_campaign&nbsp;</strong>= <span style="color: rgb(255,0,0);">identifier_{campaign_name}_{campaign_id}</span>|<span style="color: rgb(255,0,0);">object_name</span>|{campaign_name}|{campaign_id}|{source_type}<br /><strong>utm_content&nbsp;</strong>= {gbid}|{ad_id}|{phrase_id}|{source}|{device_type}|{banner_id}|{campaign_type}|{retargeting_id}|{adtarget_id}|{position}|{position_type}|{region_id}<br /><strong>utm_term&nbsp;</strong>= {keyword}</p><br />Каждый тег разделен <strong>|</strong>, все верно.<br />Но в&nbsp;<strong>utm_campaign</strong> видны <span style="color: rgb(255,0,0);">странные теги</span>, которых нет в <a href="https://yandex.ru/support/direct/statistics/url-tags.html#url-tags__dynamic">официальном списке Яндекс</a>.<br />Обрабатывать мы их не будем, но из регламента их <strong>удалять нельзя</strong>.<br />Таких кастомных тегов у клиента может быть сколько угодно, для чего то они ему нужны.<br /><strong>Важно</strong> чтобы общее кол-во тегов, разделенных | было одинаковым у клиента и в настройках интеграции.<br /><br />В самом регламенте кастомные теги можем назвать как угодно, т.к. это не официальные теги, они не сохранятся, таким образом получаем регламенты для записи:<br /><strong>utm_campaign&nbsp;</strong>= {identifier}|{object}|{campaign_name}|{campaign_id}|{source_type}<br /><strong>utm_content&nbsp;</strong>= {gbid}|{ad_id}|{phrase_id}|{source}|{device_type}|{banner_id}|{campaign_type}|{retargeting_id}|{adtarget_id}|{position}|{position_type}|{region_id}<br /><strong>utm_term&nbsp;</strong>= {keyword}</li></ol><p><br />5 - Заполняем регламент для&nbsp;utm_campaign,&nbsp;utm_content,&nbsp;utm_term<br />Это пример клиента. <span style="color: rgb(255,0,0);">Регламенты</span> <span style="color: rgb(255,0,0);">у всех могут быть разные</span>.<br /><br /><ac:image ac:height="400"><ri:attachment ri:filename="image2023-6-29_16-7-35.png" /></ac:image><br /><br />6 - Если регламенты не менялись и обращения по ним приходят уже давно, можно запустить <strong>СИНХРОН</strong> парсинга <strong>460 в облаке или в коробке</strong> за прошедший период.&nbsp;<br /><br />7 - Примеры и принцип работы:</p><ul style="list-style-type: square;"><li>К нам приходит обращение, у которого&nbsp;utm_content =&nbsp;5178629671|13954598846|44422011964|ru.avito.app|mobile</li><li>Есть установленный регламент для utm_content =&nbsp;{gbid}|{ad_id}|{phrase_id}|{source}|{device_type}</li><li>Синхрон проверяет кол-во параметров через разделитель |, <strong>если 5 пришло и 5 в регламенте</strong>, сохраняет в доп поля обращения, важна правильная последовательность</li><li>Сессии раскладываются&nbsp;по такому же принципу</li><li>CRM элементы раскладываются `на лету`, когда строится отчет, вес параметра учитывает обращения и сессии по этому CRM элементу</li></ul><p><br /></p>