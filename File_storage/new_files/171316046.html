<ac:layout><ac:layout-section ac:type="two_right_sidebar"><ac:layout-cell><h2><strong>Виды лимитов.</strong></h2><p>У каждого <strong>кабинета</strong> в Comagic есть два вида лимитов:</p><ul style="list-style-type: square;"><li>минутный (максимальное количество API запросов в минуту, сбрасываются каждую минуту)&nbsp;</li><li>суточный (максимальное количество API запросов в день, сбрасываются каждый день в 3 часа ночи)</li></ul><blockquote><p>Примечание. Если <strong style="letter-spacing: 0.0px;">логин1&nbsp;&nbsp;</strong>и&nbsp;<strong style="letter-spacing: 0.0px;">логин2&nbsp;</strong>имеют доступ к одному кабинету, то у них общие лимиты на двоих.</p></blockquote><p>За дополнительной информацией и вопросам по увеличению лимитов можно обращаться к менеджерам Comagic.</p><p>Также у Comagic имеется <a href="https://www.uiscom.ru/academiya/spravochnyj-centr/dokumentatsiya-api/data-api/#_limits">техническая информация</a> по лимитам.</p><h2><strong>Использование лимитов.</strong></h2><p>Перед тем, как получать данные данные из Comagic, Smartis использует метод авторизации, используя 1 запрос. И только потом запрашивает информацию о какой-либо сущности (звонок, обращение, чат), расходуя еще один запрос. Соответственно для получения данных мы используем 2 запроса.&nbsp;</p><blockquote><p>Примечание. Могут быть ситуации, когда мы используем и более двух запросов, это если у логина за N-ый период будет более 10000 элементов, тогда Smartis будет делать по одному дополнительному запросу, до тех пор, пока не получит все данные.<br /><span style="letter-spacing: 0.0px;">&nbsp;</span></p></blockquote><p>Каждый день Smartis забирает данные по сущностям (звонки, заявки и чаты), и самым лимитозатратным процессом&nbsp; является синхронизация чатов. Почему? Потому что мы тратим 2 запроса на получение чатов, а также тратим на каждый чат по одному дополнительному запросу на получение сообщений. Т.е. если у клиента 200 чатов, то мы отправим 202 запроса. Для экономии лимитов по сообщениям создана задача по <a href="https://app.asana.com/0/1204595668271208/1205729562827021">настройке получений сообщений</a>.</p><p><strong>Важно помнить! Что логины API используем не только мы, но и другие сервисы клиента.</strong></p><h2><strong>Превышение лимитов.</strong></h2><p>Система умеет обрабатывать ошибки превышения лимитов.</p><ul style="list-style-type: square;"><li>Во время синхронизации данных при превышении лимита, мы запоминаем дату от которой не получилось забрать данные. При следующей попытки синхронизации мы будем забирать данные с даты, за которую не получилось забрать. Пример: если мы 25.01 не забрали все данные из-за лимитов, то 26.01 мы будем пробовать забирать данные с 25.01.</li><li>Во время ручных синхронизаций при превышении лимитов, планы будут повторно отправляться на обновление.</li></ul></ac:layout-cell><ac:layout-cell><p><ac:structured-macro ac:name="toc" ac:schema-version="1" ac:macro-id="a286615e-8e1d-4851-8f43-58ea21961d65" /></p></ac:layout-cell></ac:layout-section></ac:layout>