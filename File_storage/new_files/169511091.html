<ac:layout><ac:layout-section ac:type="two_right_sidebar"><ac:layout-cell><h2>Основной описание поствью Авито</h2><p>Этот функционал нужен для того, чтобы измерить насколько эффективна медийная реклама на Avito. Искать наиболее эффективное сочетание креативов+форматов+таргетов тем самым снижать ДРР.</p><ol><li>Размещение рекламы у Авито происходит в том числе в мобильном приложении Avito</li><li>Поскольку в мобильных приложениях нет никаких кук - придуман специальный матчинг пользователей, которого нет ни у кого кроме Smartis (через группы телефонов)<ol><li>в качестве идентификатора пользователя Авито нам передает md5(~phone + 'СОЛЬ') - телефон зарегистрированного пользователя в Авито</li><li>мы на своей стороне когда анализируем конверсию по источникам или собираем карточку персоны таким же образом шифруем известные нам телефоны, и потом ищем среди данных пересечения.</li><li>За счет того что матчинг идет через телефоны - заход на сайт пользователем становится не обязательным, полная динамика колтрекинга тоже -<strong> итоговый матчинг круче</strong></li></ol></li><li>Этим способом передаются данные <strong>как из мобильных приложений, так и с web-версий сайтов Avito</strong></li></ol><p>По всем сервисам Postview работает 1 синхрон: описан тут&nbsp;<ac:link><ri:page ri:content-title="2. Post-view" /></ac:link></p><h2>Как подключить</h2><ol><li>на стороне Avito поставка к нам данных организована по конкретным РК. Чтобы в нас начали поступать данные - кампания должна появиться в файле <a href="https://docs.google.com/spreadsheets/d/1m6NRjN9t4uccKnG4miaKw0Id1u-j4pXtUoaPMKG1tl0/edit#gid=0">https://docs.google.com/spreadsheets/d/1m6NRjN9t4uccKnG4miaKw0Id1u-j4pXtUoaPMKG1tl0/edit#gid=0</a><span style="color: rgb(0,51,102);"> (заносят туда сами представители авито - ответственное лицо за это - Сергей Дроздов @svdrozdov30)</span><br /><ac:image ac:height="250" ac:width="551"><ri:attachment ri:filename="image2023-10-19_15-41-26.png" /></ac:image></li><li class="ProsemirrorEditor-listItem"><p>При проверке данного файла следует убедиться, что заполненны столбцы: load_date, raw_name, avito_name, external_id (внешний айдишник кампании). Необязательно для заполнения поле : avito_id.&nbsp;</p><ol><li class="ProsemirrorEditor-listItem"><p>Доступ админский у:</p><ol><li class="ProsemirrorEditor-listItem"><p><a href="mailto:i.y.balashov@gmail.com" class="ProsemirrorEditor-link">i.y.balashov@gmail.com</a></p></li><li class="ProsemirrorEditor-listItem"><p><a href="mailto:kireeva.3641@gmail.com" class="ProsemirrorEditor-link">kireeva.3641@gmail.com</a></p></li><li class="ProsemirrorEditor-listItem"><p><a href="mailto:mihail.terekhow@gmail.com" class="ProsemirrorEditor-link">mihail.terekhow@gmail.com</a></p></li></ol></li><li class="ProsemirrorEditor-listItem"><p>На чтение есть:</p><ol><li class="ProsemirrorEditor-listItem"><p><a href="mailto:e.ryabchun.smartis.bi@gmail.com" class="ProsemirrorEditor-link">e.ryabchun.smartis.bi@gmail.com</a></p></li><li class="ProsemirrorEditor-listItem"><p><a class="ProsemirrorEditor-link" href="mailto:garcialeonika@gmail.com">garcialeonika@gmail.com</a></p></li><li class="ProsemirrorEditor-listItem"><p><a href="mailto:albinabret@gmail.com" class="ProsemirrorEditor-link">albinabret@gmail.com</a></p></li><li class="ProsemirrorEditor-listItem"><p><a href="mailto:m.sovetova.smartis@gmail.com" class="ProsemirrorEditor-link">m.sovetova.smartis@gmail.com</a></p></li><li class="ProsemirrorEditor-listItem"><p><a class="ProsemirrorEditor-link" href="mailto:v.lazareva.smartis@gmail.com">v.lazareva.smartis@gmail.com</a></p></li><li class="ProsemirrorEditor-listItem"><p><a href="mailto:evgeniya.oparina93@gmail.com" class="ProsemirrorEditor-link">evgeniya.oparina93@gmail.com</a></p></li><li class="ProsemirrorEditor-listItem"><p><a class="ProsemirrorEditor-link" href="mailto:kalmelle4@gmail.com">kalmelle4@gmail.com</a></p></li></ol></li></ol></li><li>Если мы сами приводим клиента на это решение - пишем в тг чат &quot;Авито/Смартис: Подключение клиентов&quot;:<ol><li>Мария @mari_antropova, здравствуйте! <br />Я менеджер Smartis, мы хотим подключить на post-view нашего нового клиента&nbsp;&quot;КЛИЕНТ&quot;.<br />Как будет готово с Вашей стороны, просьба предоставить наименование клиента на вашей стороне, как оно будет поступать в файл <a href="https://docs.google.com/spreadsheets/d/1m6NRjN9t4uccKnG4miaKw0Id1u-j4pXtUoaPMKG1tl0/edit#gid=0">https://docs.google.com/spreadsheets/d/1m6NRjN9t4uccKnG4miaKw0Id1u-j4pXtUoaPMKG1tl0/edit#gid=0</a></li></ol></li><li>При подключении нового <strong>raw_name (!!!!!)</strong>&nbsp;клиента необходимо выполнить шаблонную задачу -&nbsp;<a href="https://app.asana.com/0/1206876306252490/1206877364917389/f">https://app.asana.com/0/1206876306252490/1206877364917389/f</a>. Также есть чат с Авито, при необходимости и наличии особых запросов, можно попросить коллег добавить вас в этьот чат.<ol><li><p>отдельная интеграция с авито для получения Postview данных:</p><p><ac:image ac:height="400"><ri:attachment ri:filename="image2023-7-20_13-31-51.png" /></ac:image></p></li><li><p>Для ее подключения не требуется настроек от пользователя, НО требуется выполнение шаблонной задачи&nbsp;<a href="https://app.asana.com/0/1206876306252490/1206877364917389/f">https://app.asana.com/0/1206876306252490/1206877364917389/f</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2023-7-20_13-32-29.png" /></ac:image></p></li></ol></li><li>На следующий день после появления в этом файле РК - данные о показах Avito выгрузит на наш SFTP сервер, а наши автоматические процессы скачивания данных поствью всех сервисов - скачают их и сохранят в качестве Просмотров Медийных размещений</li><li>Нашим пикселем web медийку авито тоже можно разметить,<strong> но лучше не одновременно с текущим решением </strong>(иначе будут мучения с выделением данных в отчетах и дубли показов)</li></ol><h2>Как пользоваться</h2><ol><li>в CJM<br /><ac:image ac:height="400"><ri:attachment ri:filename="image2023-7-20_14-9-28.png" /></ac:image></li><li>в отчетах<br /><ac:image ac:height="250"><ri:attachment ri:filename="image2023-7-20_14-10-23.png" /></ac:image></li><li>Креативы авито пока не передает</li><li>Отдельных Когорт в фильтре Когорта персон пока не делалось - мы больше не собираем отчеты через когорты - основное это учет в моделях атрибуции касаний с поствью.</li></ol><p><strong><br /></strong></p><h2>Техническая документация</h2><ol><li>Мы на своей стороне (через сисадмина Костю) организовали SFTP&nbsp;хостинг&nbsp;<ol><li>если работаете локально - не забудьте прописать в env:<br /><ol><li><pre>AVITO_SFTP_LOGIN=avito<br />AVITO_SFTP_PASSWORD=ПО_ЗАПРОСУ_ВЫДАЕТСЯ_ВАЛЕРОЙ<br />AVITO_SFTP_PORT=2222<br />AVITO_POSTVIEW_SALT=ПО_ЗАПРОСУ_ВЫДАЕТСЯ_ВАЛЕРОЙ</pre></li></ol></li></ol></li><li>Авито ежедневно выгружает в наш SFTP csv файлы с данными пример:&nbsp;Avito_data/post_view_2022-12-14_2022-12-14.csv<ol><li>Если файл выкладывался вручную - имя файла может быть не по шаблону! Тогда автоматика не сможет его скачать - надо локально править тут&nbsp;\App\Classes\Avito\Api::getViews имя файла и запускать локально конкретную задачу на скачивание&nbsp;</li><li>Текущая договоренность выкладывать файлы до 8 утра каждый день (пока они не соблюдают это - выкладывают иногда в 10 иногда в 16)<ol><li><strong>Поэтому данные по авито просмотрам за день стоит ожидать до конца следующего дня, обычно к середине дня, но могут быть исключения</strong></li><li><strong>Для коробок - еще +3-6 часов на передачу в коробку</strong></li></ol></li></ol></li><li>Наш центральный процесс скачивания поствью данных всех сервисов генерирует (App\Synchronizers\Stat\Postview\PostviewServiceToMysqlPlanGenerator) в 3 часа ночи задачи (mysql - postview_service_to_mysql_plan) на скачивание данных&nbsp;</li><li>Поля в файле:<ol><li><ac:image ac:height="400"><ri:attachment ri:filename="image2023-7-20_14-3-9.png" /></ac:image></li></ol></li><li>Сопоставление с нашими полями тут&nbsp;\App\Classes\Avito\Api::getNormalizedVie<br /><ac:image ac:height="400"><ri:attachment ri:filename="image2023-7-20_13-57-23.png" /></ac:image></li></ol><p>6. ГЛАВНАЯ ОСОБЕННОСТЬ:</p><ol><li>Размещение рекламы у Авито происходит в том числе в мобильном приложении Avito</li><li>Поскольку в мобильных приложениях нет никаких кук - придуман специальный матчинг пользователей &quot;Через группы телефонов&quot;</li><li>в portal_client_id Авито нам передает md5(phone + 'СОЛЬ') - телефон зарегистрированного пользователя</li><li>мы на своей стороне когда анализируем конверсию по источникам или собираем карточку персоны таким же образом шифруем известные нам телефоны, и потом ищем среди данных пересечения.<ol><li>делается это тут \App\Repositories\Postviews\ViewsRepository::createTemporaryByPersons ищите кусок с &quot;//Матинг через группы телефонов&quot;</li></ol></li><li>За счет того что матчинг идет через телефоны - заход на сайт пользователем становится не обязательным, полная динамика колтрекинга тоже - итоговый матчинг круче</li></ol><p><strong><br /></strong></p><p><strong><ac:image ac:height="250"><ri:attachment ri:filename="image2024-12-26_11-45-3.png" /></ac:image><br /></strong></p><p><br /></p></ac:layout-cell><ac:layout-cell><p><ac:structured-macro ac:name="toc" ac:schema-version="1" ac:macro-id="7a4711ee-cf7f-4311-b3f6-20f012c183ad" /></p></ac:layout-cell></ac:layout-section></ac:layout>