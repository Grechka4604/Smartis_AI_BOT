<ac:layout><ac:layout-section ac:type="two_right_sidebar"><ac:layout-cell><h2>1.Для чего нужен</h2><p>У вас есть отчет, который:</p><ul><li>Нужен вам на регулярной основе?</li><li>Строится по вчерашнее число?</li><li>Количество дней в отчете не меняется?</li></ul><p>Функционал запланированных отчетов это то, что вам нужно!</p><p>Если быть точнее, то можно попросить систему отправлять вам на почту ссылки на снимок и построитель отчетов с определенной периодичностью. При этом, отчет будет строиться всегда за последние N дней в прошлое. Отдельно напомню, что благодаря наличию снимков можно очень быстро увидеть отчет, который в обычном состоянии строится не один десяток минут.</p><p>Ниже я опишу подробности и особенности текущей реализации данного функционала.</p><h2>2. Создание нового запланированного отчета</h2><p>После построения любого отчета вы можете нажать на кнопку &ldquo;Запланировать отчет&rdquo;, которая находится рядом с другими кнопками, относящимся к отчету.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><ac:image ac:height="250"><ri:attachment ri:filename="image2023-1-16_10-17-10.png" /></ac:image></span></p><p><strong>При нажатии на кнопку появится окошко с параметрами нового отчета.</strong></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><ac:image ac:thumbnail="true" ac:height="250"><ri:attachment ri:filename="image2023-1-16_10-16-49.png" /></ac:image></span></p><h3>Параметры</h3><p>Все значения данной формы можно поменять</p><ol><li><strong>Название</strong>&nbsp;Название отчета будет фигурировать в письме, которое отправляется на почту (об этом в части 3) и в специальном списке всех созданных планов (об этом в части 2). Отмечу, что нельзя создавать отчеты с повторяющимся названием. Однако его всегда можно поменять</li><li><strong>Тип получения</strong>&nbsp;По этому параметру система понимает с какой периодичностью нужно отправлять вам отчет. Ежедневный отправляется каждый день, еженедельный - в дни, которые вы выбрали, ежемесячный приходит только первого числа каждого месяца (другое число на данный момент выбрать нельзя)</li><li><strong>День получения</strong>&nbsp;Опциональный параметр, который присутствует только в еженедельном типе отчета</li><li><strong>Время получения</strong>&nbsp;К какому часу нужен отчет. Отчет должен приходить заранее (в среднем за 30 минут до указанного времени) (подробнее будет в части 3).&nbsp;</li><li><strong>Период, дни / Период, месяцы</strong>&nbsp;Определяет период вашего отчета. &ldquo;Период, дни&rdquo; показывается в отчетах типа ежедневный и еженедельный, &ldquo;Период, месяцы&rdquo; - только в ежемесячном. При этом установлен лимит на максимальный период в 90 дней и 3 месяца соответственно. При выборе периода учитывайте, что отчет будет строиться НЕ ВКЛЮЧАЯ текущий день. Например:<ul><li>Вы выбрали период в 7 дней. Если сегодня 10е января, то вы получите отчет с 2 по 9 числа.</li><li>Вы выбрали период в 2 месяца в ежемесячном отчете. Вы получите 1го января отчет с периодом с 1го ноября по 31 декабря</li></ul></li><li><strong>Пользователь</strong>&nbsp;При создании отчета вы определяете от лица какого пользователя будет строиться отчет. Это позволяет учитывать права доступа тех или иных пользователей.<ul><li>Все пользователи в списке сгруппированы по своим отделам</li><li>Отдел супер-админов находится всегда сверху (для удобства)</li><li>Пользователь, не являющийся админом, сможет выбрать только себя</li><li>Нельзя выбрать пользователя, являющегося XRM юзером или разработчиком</li></ul></li><li><strong>Почта</strong>&nbsp;На какую почту (-ы) будут отправляться отчеты. Первая почта автоматически заполняется (берется из параметров пользователя), остальные можно добавить вручную, воспользовавшись соседней кнопкой &ldquo;Добавить почту&rdquo;</li></ol><h3>Кнопки</h3><p>Тут я опишу все возможные кнопки, хотя не все они отображаются при создании нового отчета</p><ol><li><strong>Сохранить</strong>&nbsp;(или кнопка&nbsp;<strong>Изменить)</strong>&nbsp;Сохраняет (обновляет) отчет</li><li><strong>Протестировать</strong>&nbsp;Нажимая на эту кнопку система незамедлительно ставит перед собой задачу по созданию отчета и отправке его на указанные почты. Отправка происходит сразу на все почты, которые вы указали. После нажатия на кнопку вы увидите информационное сообщение об успешном создании &ldquo;задачи&rdquo; и окно можно закрыть. В случае большой загруженности системы в целом эта задача может быть обработана не сразу. Однако, если за пару часов не пришло никакое письмо, то об этом стоит сообщить в разработку.</li><li><strong>Отмена</strong>&nbsp;Просто закрытие окна, такой же эффект достигается нажатием крестика в верхнем правом углу или клавиши esc</li><li><strong>Удалить отчет</strong>&nbsp;Удаление плана. Вы больше никогда не увидите данный план отчета на фронте. Однако этот отчет может увидеть разработчик, поэтому если вы удалили план случайно, то вы можете попросить разработчика вернуть его (сообщите ему примерное время удаления и что нужна таблица&nbsp;<code>plan_reports</code>, он поймет о чем речь и будет вам очень благодарен).</li></ol><p>При создании нового отчета и нажатии на кнопку &ldquo;Сохранить&rdquo; он будет создан сразу активным. Если при создании нового отчета вы нажмете кнопку &ldquo;Протестировать&rdquo;, то будет создан новый отчет в деактивированном состоянии. Активировать (как и поменять его название) вы можете позднее (об этом в части 2).</p><h3>Параметры отчета</h3><p>Данные параметры нельзя поменять в будущем.</p><ul><li><p>Сами параметры отчета (то есть группировка / проект / показатели / каналы / площадки / фильтры и сам тип отчета (таблица / график и тд) берутся из того отчета, который вы построили</p></li><li><p>Запланированные отчеты так же поддерживает режим сравнения периодов. Период будет строиться &ldquo;цепочкой&rdquo;. Например:</p><p>&gt; Сейчас 15 число.<br />&gt; Вы запланировали отчет, выставив &ldquo;Период, дни&rdquo; = 7.<br />&gt; В полученном отчете будут сравниваться периоды с 1 по 7 число и с 8 по 15 числа (то есть можно сравнивать неделю с неделей</p></li><li><p>На текущий момент нет возможности изменить сами параметры отчета в уже сохраненном экземпляре. Равно как нет кнопки, по нажатию на которую откроется новый построитель и построится отчет, как например это сделано в дашбордах (однако это ограничение можно обойти, воспользовавшись ссылкой на построитель из письма)</p></li></ul><p>Если это окажется крайне неудобным, то при наличии фидбека функционал может быть дополнен требуемыми кнопками.</p><p>Отдельно необходимо отметить, что можно запланировать отчет любого типа, кроме &ldquo;Исходные данные&rdquo;.</p><h2>3. Просмотр текущих отчетов</h2><p>В шапке смартиса появилась новый выпадающий список запланированных отчетов,&nbsp;<strong>если перейти в конструктор отчётов</strong></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><ac:image ac:height="250"><ri:attachment ri:filename="image2023-1-16_10-18-1.png" /></ac:image></span></p><p>На нем вы видите:</p><ol><li>Ползунок активации / деактивации отчета. Если отчет выключен, то письма приходить не будут</li><li>Название отчета</li></ol><p>На название отчета можно кликнуть. В этом случае у вас откроется окошко, как при создании нового плана, но с параметрами текущего. При необходимости вы можете поменять период, название или любой другой требуемый параметр. Повторюсь, что на текущий момент вы НЕ МОЖЕТЕ поменять сами параметра отчета (проекты / метрики / фильтры и тд)</p><h2>4. Отправка писем</h2><p>Ночью мы начинаем подготовку всех писем, которые должны быть отправлены пользователям в течение дня. Письмо со ссылками должно быть отправлено за 25 - 40 минут до времени, указанного в параметрах плана.</p><p>В случае, если мы не успели по какой либо причине построить отчет (не важно по какой причине), то пользователю должно быть отправлено письмо - извинение. Это письмо будет отправлено за 10 - 25 минут до указанного времени.</p><p>Наполнение письма выполнено в крайне минималистичном виде. Если по вашему мнению требуется добавить какую-либо дополнительную информацию, то сообщите об этом.</p><h2>5. Включение функционала</h2><p>По умолчанию клиенты не могут использовать данный функционал. Для активации данной возможности вам поможет данная шаблонная задача&nbsp;<a class="external-link" href="https://app.asana.com/0/1200295944412855/1203753813935632/f" rel="nofollow">https://app.asana.com/0/1200295944412855/1203753813935632/f</a></p><h2>ВАЖНО</h2><p>При создании данного функционала было выявлено множество особенностей системы, которые не позволяли строить отчет и просматривать результат.</p><p>Пожалуйста, при создании каждого нового плана тестируйте его. Вполне возможно, что вы наткнетесь на какую-либо ошибку, которую я пропустил и которая не позволяет вам воспользоваться данным функционалом.</p></ac:layout-cell><ac:layout-cell><p><ac:structured-macro ac:name="toc" ac:schema-version="1" ac:macro-id="03b85f31-aad6-4747-99e4-0e3ce06c734a" /></p></ac:layout-cell></ac:layout-section></ac:layout>